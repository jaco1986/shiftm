(window.webpackJsonp=window.webpackJsonp||[]).push([[680],{1139:function(e,t,n){"use strict";var a=n(24),r=n(13),i=n(27),l=n(84),o=n(85),s=n(26),c=n(1145),u=n(86);r(r.S+r.F*!n(81)((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,r,m,d=i(e),p="function"==typeof this?this:Array,f=arguments.length,b=f>1?arguments[1]:void 0,g=void 0!==b,h=0,v=u(d);if(g&&(b=a(b,f>2?arguments[2]:void 0,2)),null==v||p==Array&&o(v))for(n=new p(t=s(d.length));t>h;h++)c(n,h,g?b(d[h],h):d[h]);else for(m=v.call(d),n=new p;!(r=m.next()).done;h++)c(n,h,g?l(m,b,[r.value,h],!0):r.value);return n.length=h,n}})},1140:function(e,t,n){"use strict";var a=n(1146),r=n(1141);e.exports=n(1147)("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return a.def(r(this,"Set"),e=0===e?0:e,e)}},a)},1141:function(e,t,n){var a=n(12);e.exports=function(e,t){if(!a(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},1142:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=n(1137),l=n(1136),o=n.n(l);n(131);t.a=function(e){var t=e.className,n=e.size,a=e.style,l=e.text;return r.a.createElement(i.a,{to:"/vic/",className:o()("vic","vic--"+n,t)},r.a.createElement("div",{className:"icon"},r.a.createElement("img",{src:"/img/vicmojis/vic"+a+".svg",alt:"Vic - The Vector Mascot"})),l&&r.a.createElement("div",{className:"text"},l))}},1144:function(e,t,n){"use strict";var a=n(0),r=n.n(a),i=(n(1137),n(1142));t.a=function(e){var t=e.text;return r.a.createElement("section",{className:"empty"},r.a.createElement(i.a,{style:"no",text:t}))}},1145:function(e,t,n){"use strict";var a=n(28),r=n(53);e.exports=function(e,t,n){t in e?a.f(e,t,r(0,n)):e[t]=n}},1146:function(e,t,n){"use strict";var a=n(28).f,r=n(82),i=n(80),l=n(24),o=n(78),s=n(79),c=n(54),u=n(83),m=n(87),d=n(10),p=n(1143).fastKey,f=n(1141),b=d?"_s":"size",g=function(e,t){var n,a=p(t);if("F"!==a)return e._i[a];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var u=e((function(e,a){o(e,u,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[b]=0,null!=a&&s(a,n,e[c],e)}));return i(u.prototype,{clear:function(){for(var e=f(this,t),n=e._i,a=e._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete n[a.i];e._f=e._l=void 0,e[b]=0},delete:function(e){var n=f(this,t),a=g(n,e);if(a){var r=a.n,i=a.p;delete n._i[a.i],a.r=!0,i&&(i.n=r),r&&(r.p=i),n._f==a&&(n._f=r),n._l==a&&(n._l=i),n[b]--}return!!a},forEach:function(e){f(this,t);for(var n,a=l(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(a(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(f(this,t),e)}}),d&&a(u.prototype,"size",{get:function(){return f(this,t)[b]}}),u},def:function(e,t,n){var a,r,i=g(e,t);return i?i.v=n:(e._l=i={i:r=p(t,!0),k:t,v:n,p:a=e._l,n:void 0,r:!1},e._f||(e._f=i),a&&(a.n=i),e[b]++,"F"!==r&&(e._i[r]=i)),e},getEntry:g,setStrong:function(e,t,n){c(e,t,(function(e,n){this._t=f(e,t),this._k=n,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),n?"entries":"values",!n,!0),m(t)}}},1147:function(e,t,n){"use strict";var a=n(5),r=n(13),i=n(15),l=n(80),o=n(1143),s=n(79),c=n(78),u=n(12),m=n(14),d=n(81),p=n(39),f=n(1148);e.exports=function(e,t,n,b,g,h){var v=a[e],_=v,j=g?"set":"add",O=_&&_.prototype,y={},N=function(e){var t=O[e];i(O,e,"delete"==e||"has"==e?function(e){return!(h&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return h&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,n){return t.call(this,0===e?0:e,n),this})};if("function"==typeof _&&(h||O.forEach&&!m((function(){(new _).entries().next()})))){var E=new _,w=E[j](h?{}:-0,1)!=E,x=m((function(){E.has(1)})),k=d((function(e){new _(e)})),T=!h&&m((function(){for(var e=new _,t=5;t--;)e[j](t,t);return!e.has(-0)}));k||((_=t((function(t,n){c(t,_,e);var a=f(new v,t,_);return null!=n&&s(n,g,a[j],a),a}))).prototype=O,O.constructor=_),(x||T)&&(N("delete"),N("has"),g&&N("get")),(T||w)&&N(j),h&&O.clear&&delete O.clear}else _=b.getConstructor(t,e,g,j),l(_.prototype,n),o.NEED=!0;return p(_,e),y[e]=_,r(r.G+r.W+r.F*(_!=v),y),h||b.setStrong(_,e,g),_}},1148:function(e,t,n){var a=n(12),r=n(1149).set;e.exports=function(e,t,n){var i,l=t.constructor;return l!==n&&"function"==typeof l&&(i=l.prototype)!==n.prototype&&a(i)&&r&&r(e,i),e}},1149:function(e,t,n){var a=n(12),r=n(8),i=function(e,t){if(r(e),!a(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,a){try{(a=n(24)(Function.call,n(1163).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,n){return i(e,n),t?e.__proto__=n:a(e,n),e}}({},!1):void 0),check:i}},1150:function(e,t,n){"use strict";n(1140),n(77),n(1139),n(25),n(20),n(19),n(1138);var a=n(0),r=n.n(a),i=n(1157),l=n.n(i);t.a=function(e){var t=e.currentState,n=e.humanize,a=e.icon,i=e.name,o=e.setState,s=e.values;if(0==s.size)return null;var c=Array.from(s);return r.a.createElement(r.a.Fragment,null,c.map((function(e,s){var c="string"==typeof e&&n?l()(e):e;return r.a.createElement("label",{key:s},r.a.createElement("input",{checked:t.has(e),name:i,onChange:function(n){var a=new Set(t);n.currentTarget.checked?a.add(e):a.delete(e),o(a)},type:"checkbox"}),c&&r.a.createElement(r.a.Fragment,null,a?r.a.createElement("i",{className:"feather icon-"+a}):""," ",c))})))}},1153:function(e,t,n){"use strict";var a=n(13),r=n(1154),i=n(27),l=n(26),o=n(29),s=n(1166);a(a.P,"Array",{flatMap:function(e){var t,n,a=i(this);return o(e),t=l(a.length),n=s(a,0),r(n,a,a,t,0,1,e,arguments[1]),n}}),n(88)("flatMap")},1154:function(e,t,n){"use strict";var a=n(1165),r=n(12),i=n(26),l=n(24),o=n(2)("isConcatSpreadable");e.exports=function e(t,n,s,c,u,m,d,p){for(var f,b,g=u,h=0,v=!!d&&l(d,p,3);h<c;){if(h in s){if(f=v?v(s[h],h,n):s[h],b=!1,r(f)&&(b=void 0!==(b=f[o])?!!b:a(f)),b&&m>0)g=e(t,n,f,i(f.length),g,m-1)-1;else{if(g>=9007199254740991)throw TypeError();t[g]=f}g++}h++}return g}},1155:function(e,t,n){"use strict";n(1138),n(1151),n(1152),n(1139),n(1153),n(25),n(20),n(19),n(77),n(1140);var a=n(0),r=n.n(a),i=n(1150),l=n(1144),o=n(1158),s=n.n(o);t.a=function(e){var t=e.children,n=e.filters,o=Object(a.useState)(!1),c=o[0],u=o[1],m=Object(a.useState)(new Set),d=m[0],p=m[1],f=Object(a.useState)(!1),b=f[0],g=f[1],h=Object(a.useState)(null),v=h[0],_=h[1],j=[];t&&(j=Array.isArray(t)?t:[t]);var O=j.some((function(e){return e.props.common})),y=s()(j).flatMap((function(e){return e.props.groups})).uniq().value(),N=j.some((function(e){return e.props.required})),E=j;return c&&(E=E.filter((function(e){return e.props.common}))),d.size>0&&(E=E.filter((function(e){return Array.from(d).every((function(t){return e.props.groups.includes(t)}))}))),b&&(E=E.filter((function(e){return e.props.required}))),v&&(E=E.filter((function(e){return e.props.name.toLowerCase().includes(v.toLowerCase())}))),r.a.createElement(r.a.Fragment,null,j.length>1&&!1!==n?r.a.createElement("div",{className:"filters"},r.a.createElement("div",{className:"search"},r.a.createElement("span",{className:"search--result-count"},E.length," items"),r.a.createElement("input",{className:"input--text input--lg",type:"text",onChange:function(e){return _(e.currentTarget.value)},placeholder:"\ud83d\udd0d Search..."})),r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"filter--choices"},r.a.createElement(i.a,{values:y,currentState:d,setState:p}),O&&r.a.createElement("label",{title:"Only show popular/common results"},r.a.createElement("input",{type:"checkbox",onChange:function(e){return u(e.currentTarget.checked)},checked:c}),"common"),N&&r.a.createElement("label",{title:"Only show required results"},r.a.createElement("input",{type:"checkbox",onChange:function(e){return g(e.currentTarget.checked)},checked:b}),"required")))):null,!Array.isArray(E)||E.length>0?r.a.createElement("ul",{className:"connected-list"},E):r.a.createElement(l.a,{text:"no components found"}))}},1156:function(e,t,n){"use strict";n(89),n(25),n(20),n(19),n(52),n(1138),n(1151),n(1152);var a=n(0),r=n.n(a),i=n(1136),l=n.n(i),o=(n(1128),n(1167));function s(e){return e.includes(".")?'"'+e+'"':e}function c(e){return"string"==typeof e&&e.includes("\n")?'"""\n'+e+'\n"""':JSON.stringify(e)}function u(e,t){return(n=t)&&n.constructor===Object?"name"in t&&"value"in t?s(t.name)+" = "+c(t.value):s(Object.keys(t)[0])+" = "+c(Object.values(t)[0]):e?s(e)+" = "+c(t):c(t);var n}function m(e){var t=e.values,n=[];if(Array.isArray(t))for(var a in t){var i=t[a];n.push(r.a.createElement("code",{key:i},c(i))),n.push(" ")}else for(var l in t)n.push(r.a.createElement("code",{key:l,className:"with-info-icon",title:t[l]},c(l))),n.push(" ");return n}function d(e){var t=e.name,n=e.path,a=e.values,i="";return a.forEach((function(e){n&&(i+=n+"."),i+=u(t,e)+"\n"})),r.a.createElement("div",null,r.a.createElement(o.a,{className:"language-toml"},i))}function p(e){var t=e.unit,n=e.value,a="";return t&&(a=r.a.createElement(r.a.Fragment,null," (",t,")")),r.a.createElement(r.a.Fragment,null,r.a.createElement("code",null,c(n)),a)}function f(e){var t=e.value,n=Object.keys(t)[0],a=Object.values(t)[0];return""==a&&(a=null),r.a.createElement("span",null,r.a.createElement("code",null,r.a.createElement("a",{href:"#"+n},n))," ","= ",r.a.createElement("code",null,c(a)))}function b(e){var t=e.defaultValue,n=e.enumValues,i=e.examples,l=(e.groups,e.name),o=e.path,s=e.relevantWhen,c=e.required,u=e.unit,b=e.warnings,g=Object(a.useState)(!1),h=g[0],v=g[1];return r.a.createElement("ul",{className:"info"},b&&b.length>0&&b.map((function(e,t){return r.a.createElement("li",{key:t,className:"warning"},r.a.createElement("i",{className:"feather icon-alert-triangle"})," WARNING:"," ",e.text)})),s&&r.a.createElement("li",null,"Only ",c?"required":"relevant"," when:"," ",r.a.createElement(f,{value:s})),void 0!==t?null!==t?r.a.createElement("li",null,"Default: ",r.a.createElement(p,{unit:u,value:t})):r.a.createElement("li",null,"No default"):null,n&&r.a.createElement("li",null,"Enum, must be one of: ",r.a.createElement(m,{values:n})),(i.length>1||i[0]!=t)&&r.a.createElement("li",null,r.a.createElement("div",{className:"show-more",onClick:function(){return v(!h)}},h?"Hide examples":"View examples"),h&&r.a.createElement(d,{name:l,path:o,values:i})))}t.a=function(e){var t=e.children,n=e.common,i=e.defaultValue,o=e.enumValues,s=e.examples,c=e.groups,u=e.name,m=e.path,d=e.relevantWhen,p=e.required,f=e.templateable,g=e.type,h=e.unit,v=e.warnings,_=Object(a.useState)(!1),j=_[0],O=(_[1],t);return j&&(O=O.filter((function(e){return"p"!=e.props.originalType}))),r.a.createElement("li",{className:l()({"field-required":p,"field-collapsed":j}),required:p},r.a.createElement("div",{className:"badges"},f&&r.a.createElement("span",{className:"badge badge--primary with-info-icon",title:"This option is dynamic and accepts the Vector template syntax"},"templateable"),g&&r.a.createElement("span",{className:"badge badge--secondary"},g,h&&r.a.createElement(r.a.Fragment,null," (",h,")")),o&&Object.keys(o).length>0&&r.a.createElement("span",{className:"badge badge--secondary with-info-icon",title:"This option is an enumation and only allows specific values"},"enum"),n&&r.a.createElement("span",{className:"badge badge--primary with-info-icon",title:"This is a popular that we recommend for getting started"},"common"),p?r.a.createElement("span",{className:"badge badge--danger"},"required",d&&"*"):r.a.createElement("span",{className:"badge badge--secondary"},"optional")),O,!j&&"table"!=g&&r.a.createElement(b,{defaultValue:i,enumValues:o,examples:s,groups:c,name:u,path:m,relevantWhen:d,required:p,unit:h,warnings:v}))}},836:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return u})),n.d(t,"metadata",(function(){return m})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return f}));var a=n(1),r=n(9),i=(n(0),n(1128)),l=n(1155),o=n(1156),s=n(1161),c=n(1160),u={last_modified_on:"2020-06-10",component_title:"Merge",description:"The Vector [`merge`](#merge) transform accepts and outputs `log` events, allowing you to merge partial log events into a single event.",event_types:["log"],function_category:"aggregate",issues_url:"https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22transform%3A+merge%22",operating_systems:["Linux","MacOS","Windows"],sidebar_label:'merge|["log"]',source_url:"https://github.com/timberio/vector/tree/master/src/transforms/merge.rs",status:"beta",title:"Merge Transform",unsupported_operating_systems:[]},m={id:"reference/transforms/merge",title:"Merge Transform",description:"The Vector [`merge`](#merge) transform accepts and outputs `log` events, allowing you to merge partial log events into a single event.",source:"@site/docs/reference/transforms/merge.md",permalink:"/docs/reference/transforms/merge",editUrl:"https://github.com/timberio/vector/edit/master/website/docs/reference/transforms/merge.md",sidebar_label:'merge|["log"]',sidebar:"docs",previous:{title:"Lua Transform",permalink:"/docs/reference/transforms/lua"},next:{title:"Regex Parser Transform",permalink:"/docs/reference/transforms/regex_parser"}},d=[{value:"Configuration",id:"configuration",children:[{value:"merge_fields",id:"merge_fields",children:[]},{value:"partial_event_marker_field",id:"partial_event_marker_field",children:[]},{value:"stream_discriminant_fields",id:"stream_discriminant_fields",children:[]}]},{value:"Examples",id:"examples",children:[]},{value:"How It Works",id:"how-it-works",children:[{value:"Complex Processing",id:"complex-processing",children:[]},{value:"Environment Variables",id:"environment-variables",children:[]},{value:"Field Notation Syntax",id:"field-notation-syntax",children:[]},{value:"When to use this transform",id:"when-to-use-this-transform",children:[]}]}],p={rightToc:d};function f(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("p",null,"The Vector ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#merge"}),Object(i.b)("inlineCode",{parentName:"a"},"merge"))," transform\naccepts and outputs ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/about/data-model/log/"}),Object(i.b)("inlineCode",{parentName:"a"},"log"))," events, allowing you to merge\npartial log events into a single event."),Object(i.b)("h2",{id:"configuration"},"Configuration"),Object(i.b)(s.a,{block:!0,defaultValue:"common",values:[{label:"Common",value:"common"},{label:"Advanced",value:"advanced"}],mdxType:"Tabs"},Object(i.b)(c.a,{value:"common",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-toml",metastring:'title="vector.toml"',title:'"vector.toml"'}),'[transforms.my_transform_id]\n  type = "merge" # required\n  inputs = ["my-source-or-transform-id"] # required\n  merge_fields = ["message"] # optional, default\n  partial_event_marker_field = "_partial" # optional, default\n  stream_discriminant_fields = [] # optional, default\n'))),Object(i.b)(c.a,{value:"advanced",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-toml",metastring:'title="vector.toml"',title:'"vector.toml"'}),'[transforms.my_transform_id]\n  type = "merge" # required\n  inputs = ["my-source-or-transform-id"] # required\n  merge_fields = ["message"] # optional, default\n  partial_event_marker_field = "_partial" # optional, default\n  stream_discriminant_fields = [] # optional, default\n')))),Object(i.b)(l.a,{filters:!0,mdxType:"Fields"},Object(i.b)(o.a,{common:!0,defaultValue:["message"],enumValues:null,examples:[["message"],["message","parent.child"]],groups:[],name:"merge_fields",path:null,relevantWhen:null,required:!1,templateable:!1,type:"[string]",unit:null,warnings:[],mdxType:"Field"},Object(i.b)("h3",{id:"merge_fields"},"merge_fields"),Object(i.b)("p",null,"Fields to merge. The values of these fields will be merged into the first\npartial event. Fields not specified here will be ignored. Merging process takes\nthe first partial event and the base, then it merges in the fields from each\nsuccessive partial event, until a non-partial event arrives. Finally, the\nnon-partial event fields are merged in, producing the resulting merged event.\nSee ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#field-notation-syntax"}),"Field Notation Syntax")," for more info.")),Object(i.b)(o.a,{common:!0,defaultValue:"_partial",enumValues:null,examples:["_partial","parent.child"],groups:[],name:"partial_event_marker_field",path:null,relevantWhen:null,required:!1,templateable:!1,type:"string",unit:null,warnings:[],mdxType:"Field"},Object(i.b)("h3",{id:"partial_event_marker_field"},"partial_event_marker_field"),Object(i.b)("p",null,"The field that indicates that the event is partial. A consequent stream of\npartial events along with the first non-partial event will be merged together.\nSee ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#field-notation-syntax"}),"Field Notation Syntax")," for more info.")),Object(i.b)(o.a,{common:!0,defaultValue:[],enumValues:null,examples:[["host"],["host","parent.child"]],groups:[],name:"stream_discriminant_fields",path:null,relevantWhen:null,required:!1,templateable:!1,type:"[string]",unit:null,warnings:[],mdxType:"Field"},Object(i.b)("h3",{id:"stream_discriminant_fields"},"stream_discriminant_fields"),Object(i.b)("p",null,"An ordered list of fields to distinguish streams by. Each stream has a separate\npartial event merging state. Should be used to prevent events from unrelated\nsources from mixing together, as this affects partial event processing.\nSee ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#field-notation-syntax"}),"Field Notation Syntax")," for more info."))),Object(i.b)("h2",{id:"examples"},"Examples"),Object(i.b)(s.a,{block:!0,defaultValue:"default",select:!1,values:[{label:"Default",value:"default"},{label:"With Merge Fields",value:"with-merge-fields"}],mdxType:"Tabs"},Object(i.b)(c.a,{value:"default",mdxType:"TabItem"},Object(i.b)("p",null,"Given the following ",Object(i.b)("em",{parentName:"p"},"default")," configuration:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-toml",metastring:'title="vector.toml"',title:'"vector.toml"'}),'[transforms.merge_events]\n  type = "merge"\n  inputs = [...]\n')),Object(i.b)("p",null,"And these three partial ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/about/data-model/log/"}),Object(i.b)("inlineCode",{parentName:"a"},"log")," events"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="first log event"',title:'"first',log:!0,'event"':!0}),'{\n  "message": "First",\n  "_partial": true,\n  "custom_string_field": "value1",\n  "custom_int_field": 1\n}\n')),Object(i.b)("p",null,"and"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="second log event"',title:'"second',log:!0,'event"':!0}),'{\n  "message": "Second",\n  "_partial": true,\n  "custom_string_field": "value2",\n  "custom_int_field": 2\n}\n')),Object(i.b)("p",null,"and"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="third log event"',title:'"third',log:!0,'event"':!0}),'{\n  "message": "Third",\n  "custom_string_field": "value3",\n  "custom_int_field": 3\n}\n')),Object(i.b)("p",null,"A single ",Object(i.b)("em",{parentName:"p"},"merged")," log event will be produced:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'{\n  "message": "FirstSecondThird",\n  "custom_string_field": "value1",\n  "custom_int_field": 1\n}\n')),Object(i.b)("p",null,"Notice that ",Object(i.b)("inlineCode",{parentName:"p"},"custom_string_field")," and ",Object(i.b)("inlineCode",{parentName:"p"},"custom_int_field")," were not overridden. This is because they were not listed in the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#merge_fields"}),Object(i.b)("inlineCode",{parentName:"a"},"merge_fields"))," option.")),Object(i.b)(c.a,{value:"with-merge-fields",mdxType:"TabItem"},Object(i.b)("p",null,"Given the following configuration:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-toml",metastring:'title="vector.toml"',title:'"vector.toml"'}),'[transforms.merge_events]\n  type = "merge"\n  inputs = [...]\n  merge_fields = ["message", "custom_string_field", "custom_int_field"]\n')),Object(i.b)("p",null,"And these three partial ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/about/data-model/log/"}),Object(i.b)("inlineCode",{parentName:"a"},"log")," events"),":"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="first log event"',title:'"first',log:!0,'event"':!0}),'{\n  "message": "First",\n  "_partial": true,\n  "custom_string_field": "value1",\n  "custom_int_field": 1\n}\n')),Object(i.b)("p",null,"and"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="second log event"',title:'"second',log:!0,'event"':!0}),'{\n  "message": "Second",\n  "_partial": true,\n  "custom_string_field": "value2",\n  "custom_int_field": 2\n}\n')),Object(i.b)("p",null,"and"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript",metastring:'title="third log event"',title:'"third',log:!0,'event"':!0}),'{\n  "message": "Third",\n  "custom_string_field": "value3",\n  "custom_int_field": 3\n}\n')),Object(i.b)("p",null,"A single ",Object(i.b)("em",{parentName:"p"},"merged")," log event will be produced:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'{\n  "message": "FirstSecondThird",\n  "custom_string_field": "value1value2value3",\n  "custom_int_field": 3\n}\n')),Object(i.b)("p",null,"Notice that ",Object(i.b)("inlineCode",{parentName:"p"},"custom_string_field")," is concatenated and ",Object(i.b)("inlineCode",{parentName:"p"},"custom_int_field")," overridden. This is because it was specified in the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#merge_fields"}),Object(i.b)("inlineCode",{parentName:"a"},"merge_fields"))," option."))),Object(i.b)("h2",{id:"how-it-works"},"How It Works"),Object(i.b)("h3",{id:"complex-processing"},"Complex Processing"),Object(i.b)("p",null,"If you encounter limitations with the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#merge"}),Object(i.b)("inlineCode",{parentName:"a"},"merge")),"\ntransform then we recommend using a ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://vector.dev/components/?functions%5B%5D=program"}),"runtime transform"),".\nThese transforms are designed for complex processing and give you the power of\nfull programming runtime."),Object(i.b)("h3",{id:"environment-variables"},"Environment Variables"),Object(i.b)("p",null,"Environment variables are supported through all of Vector's configuration.\nSimply add ",Object(i.b)("inlineCode",{parentName:"p"},"${MY_ENV_VAR}")," in your Vector configuration file and the variable\nwill be replaced before being evaluated."),Object(i.b)("p",null,"You can learn more in the\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/setup/configuration/#environment-variables"}),"Environment Variables")," section."),Object(i.b)("h3",{id:"field-notation-syntax"},"Field Notation Syntax"),Object(i.b)("p",null,"The ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#merge_fields"}),Object(i.b)("inlineCode",{parentName:"a"},"merge_fields")),", ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#partial_event_marker_field"}),Object(i.b)("inlineCode",{parentName:"a"},"partial_event_marker_field")),", and ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"#stream_discriminant_fields"}),Object(i.b)("inlineCode",{parentName:"a"},"stream_discriminant_fields"))," options\nsupport ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/field-path-notation/"}),"Vector's field notation syntax"),",\nenabling access to root-level, nested, and array field values. For example:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-toml",metastring:'title="vector.toml"',title:'"vector.toml"'}),'[transforms.my_merge_transform_id]\n  # ...\n  merge_fields = ["message"]\n  merge_fields = ["message", "parent.child"]\n  # ...\n')),Object(i.b)("p",null,"You can learn more about Vector's field notation in the\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/field-path-notation/"}),"field notation reference"),"."),Object(i.b)("h3",{id:"when-to-use-this-transform"},"When to use this transform"),Object(i.b)("p",null,"Where possible, Vector will handle event merging at the source level. For\nexample, the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/sources/file/"}),Object(i.b)("inlineCode",{parentName:"a"},"file"))," contains a ",Object(i.b)("inlineCode",{parentName:"p"},"message_start_indicator"),"\noption and the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/reference/sources/file/"}),Object(i.b)("inlineCode",{parentName:"a"},"docker"))," contains an ",Object(i.b)("inlineCode",{parentName:"p"},"auto_partial_merge"),"\noption. Both of these options should be used instead of this transform.\nUnfortunately, merging logs is not always this straight forward. It is\nprecisely these edge cases that this transform hopes to solve."),Object(i.b)("p",null,"If you're using this transform for a common use case, please consider\n",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/timberio/vector/issues/new?labels=type%3A+new+feature"}),"opening an issue")," to let us know."))}f.isMDXComponent=!0}}]);