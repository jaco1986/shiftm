(window.webpackJsonp=window.webpackJsonp||[]).push([[752],{872:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return s})),a.d(t,"rightToc",(function(){return d})),a.d(t,"default",(function(){return m}));var n=a(1),r=a(6),o=(a(0),a(943)),c=a(944),l=a(965),b=a(964),i={last_modified_on:"2020-04-06",title:"Monitoring",description:"How to monitor and observe Vector with logs, metrics, and more."},s={id:"administration/monitoring",title:"Monitoring",description:"How to monitor and observe Vector with logs, metrics, and more.",source:"@site/docs/administration/monitoring.md",permalink:"/docs/administration/monitoring"},d=[{value:"Logs",id:"logs",children:[{value:"Accessing",id:"accessing",children:[]},{value:"Levels",id:"levels",children:[]},{value:"Full Backtraces",id:"full-backtraces",children:[]},{value:"Rate Limiting",id:"rate-limiting",children:[]}]},{value:"Metrics",id:"metrics",children:[]},{value:"Troubleshooting",id:"troubleshooting",children:[]}],p={rightToc:d};function m(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},p,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"This document will cover monitoring Vector."),Object(o.b)("h2",{id:"logs"},"Logs"),Object(o.b)("h3",{id:"accessing"},"Accessing"),Object(o.b)(l.a,{block:!1,centered:!0,groupId:"interfaces",placeholder:"How did you install Vector?",select:!0,size:null,values:[{group:"Package managers",label:"DPKG",value:"dpkg"},{group:"Platforms",label:"Docker CLI",value:"docker-cli"},{group:"Platforms",label:"Docker Compose",value:"docker-compose"},{group:"Package managers",label:"Homebrew",value:"homebrew"},{group:"Package managers",label:"MSI",value:"msi"},{group:"Package managers",label:"Nix",value:"nix"},{group:"Package managers",label:"RPM",value:"rpm"},{group:"Nones",label:"Vector CLI",value:"vector-cli"}],mdxType:"Tabs"},Object(o.b)(b.a,{value:"dpkg",mdxType:"TabItem"},Object(o.b)("p",null,"The Vector DEB package installs Vector as a Systemd service. Logs can be\naccessed through the ",Object(o.b)("inlineCode",{parentName:"p"},"journalctl")," utility:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"sudo journalctl -fu vector\n"))),Object(o.b)(b.a,{value:"docker-cli",mdxType:"TabItem"},Object(o.b)("p",null,"If you've started Vector through the ",Object(o.b)("inlineCode",{parentName:"p"},"docker")," CLI you can access Vector's logs\nvia the ",Object(o.b)("inlineCode",{parentName:"p"},"docker logs")," command. First, find the Vector container ID:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"docker ps | grep vector\n")),Object(o.b)("p",null,"Copy Vector's container ID and use it to tail the logs:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"docker logs -f <container-id>\n"))),Object(o.b)(b.a,{value:"docker-compose",mdxType:"TabItem"},Object(o.b)("p",null,"If you started Vector through Docker compose you can use the following command\nto access Vector's logs:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"docker-compose logs -f vector\n")),Object(o.b)("p",null,"Replace ",Object(o.b)("inlineCode",{parentName:"p"},"vector")," with the name of Vector's service if it is not called ",Object(o.b)("inlineCode",{parentName:"p"},"vector"),".")),Object(o.b)(b.a,{value:"homebrew",mdxType:"TabItem"},Object(o.b)("p",null,"When Vector is started through Homebrew the logs are automatically routed to\n",Object(o.b)("inlineCode",{parentName:"p"},"/usr/local/var/log/vector.log"),". You can tail them with the ",Object(o.b)("inlineCode",{parentName:"p"},"tail")," utility:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"tail -f /usr/local/var/log/vector.log\n"))),Object(o.b)(b.a,{value:"msi",mdxType:"TabItem"},Object(o.b)("p",null,"The Vector MSI package does not install Vector into a proces manager. Therefore,\nVector must be started by executing the Vector binary directly. Vector's logs\nare written to ",Object(o.b)("inlineCode",{parentName:"p"},"STDOUT"),". You are in charge of routing ",Object(o.b)("inlineCode",{parentName:"p"},"STDOUT"),", and this\ndetermines how you access Vector's logs.")),Object(o.b)(b.a,{value:"nix",mdxType:"TabItem"},Object(o.b)("p",null,"The Vector Nix package does not install Vector into a proces manager. Therefore,\nVector must be started by executing the Vector binary directly. Vector's logs\nare written to ",Object(o.b)("inlineCode",{parentName:"p"},"STDOUT"),". You are in charge of routing ",Object(o.b)("inlineCode",{parentName:"p"},"STDOUT"),", and this\ndetermines how you access Vector's logs.")),Object(o.b)(b.a,{value:"rpm",mdxType:"TabItem"},Object(o.b)("p",null,"The Vector RPM package installs Vector as a Systemd service. Logs can be\naccessed through the ",Object(o.b)("inlineCode",{parentName:"p"},"journalctl")," utility:"),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"sudo journalctl -fu vector\n"))),Object(o.b)(b.a,{value:"vector-cli",mdxType:"TabItem"},Object(o.b)("p",null,"If you are starting Vector directly from the Vector CLI then all logs will be\nwritten to ",Object(o.b)("inlineCode",{parentName:"p"},"STDOUT"),". You are in charge of routing ",Object(o.b)("inlineCode",{parentName:"p"},"STDOUT"),", and this determines\nhow you access Vector's logs."))),Object(o.b)("h3",{id:"levels"},"Levels"),Object(o.b)("p",null,"By default, Vector logs on the ",Object(o.b)("inlineCode",{parentName:"p"},"info")," level, you can change the level through\na variety of methods:"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Method"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:"left"}),"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(o.b)("a",Object(n.a)({parentName:"td"},{href:"/docs/administration/process-management/#flags"}),Object(o.b)("inlineCode",{parentName:"a"},"-v")," flag")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Drops the log level to ",Object(o.b)("inlineCode",{parentName:"td"},"debug"),".")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(o.b)("a",Object(n.a)({parentName:"td"},{href:"/docs/administration/process-management/#flags"}),Object(o.b)("inlineCode",{parentName:"a"},"-vv")," flag")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Drops the log level to ",Object(o.b)("inlineCode",{parentName:"td"},"trace"),".")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(o.b)("a",Object(n.a)({parentName:"td"},{href:"/docs/administration/process-management/#flags"}),Object(o.b)("inlineCode",{parentName:"a"},"-q")," flag")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Raises the log level to ",Object(o.b)("inlineCode",{parentName:"td"},"warn"),".")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(o.b)("a",Object(n.a)({parentName:"td"},{href:"/docs/administration/process-management/#flags"}),Object(o.b)("inlineCode",{parentName:"a"},"-qq")," flag")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Raises the log level to ",Object(o.b)("inlineCode",{parentName:"td"},"error"),".")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(o.b)("a",Object(n.a)({parentName:"td"},{href:"/docs/administration/process-management/#flags"}),Object(o.b)("inlineCode",{parentName:"a"},"-qqq")," flag")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Turns logging off.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),Object(o.b)("inlineCode",{parentName:"td"},"LOG=<level>")," env var"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:"left"}),"Set the log level. Must be one of ",Object(o.b)("inlineCode",{parentName:"td"},"trace"),", ",Object(o.b)("inlineCode",{parentName:"td"},"debug"),", ",Object(o.b)("inlineCode",{parentName:"td"},"info"),", ",Object(o.b)("inlineCode",{parentName:"td"},"warn"),", ",Object(o.b)("inlineCode",{parentName:"td"},"error"),", ",Object(o.b)("inlineCode",{parentName:"td"},"off"),".")))),Object(o.b)("h3",{id:"full-backtraces"},"Full Backtraces"),Object(o.b)("p",null,"You can enable full error backtraces by setting the  ",Object(o.b)("inlineCode",{parentName:"p"},"RUST_BACKTRACE=full")," env\nvar. More on this in the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/guides/advanced/support/"}),"Troubleshooting guide"),"."),Object(o.b)("h3",{id:"rate-limiting"},"Rate Limiting"),Object(o.b)("p",null,"Vector rate limits log events in the hot path. This is to your benefit as\nit allows you to get granular insight without the risk of saturating IO\nand disrupting the service. The tradeoff is that repetitive logs will not be\nlogged."),Object(o.b)("h2",{id:"metrics"},"Metrics"),Object(o.b)("p",null,"Currently, Vector does not expose Metrics. ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/timberio/vector/issues/230"}),"Issue #230"),"\nrepresents work to run internal Vector metrics through Vector's pipeline.\nAllowing you to define internal metrics as a ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/sources/"}),"source")," and\nthen define one of many metrics ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/reference/sinks/"}),"sinks")," to collect those metrics,\njust as you would metrics from any other source."),Object(o.b)("h2",{id:"troubleshooting"},"Troubleshooting"),Object(o.b)("p",null,"Please refer to our troubleshooting guide:"),Object(o.b)(c.a,{to:"/docs/setup/guides/troubleshooting",mdxType:"Jump"},"Troubleshooting Guide"))}m.isMDXComponent=!0}}]);