<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Shift'M Support Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Shift'M Support Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css">

<title data-react-helmet="true">Prometheus Sink | Docs | Shift&#x27;M Support</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Shift&#x27;M Support"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="description" content="The Vector `prometheus` sink exposes `metric` events to Prometheus metrics service."><meta data-react-helmet="true" property="og:description" content="The Vector `prometheus` sink exposes `metric` events to Prometheus metrics service."><meta data-react-helmet="true" property="og:url" content="https://jaco1986.github.io/docs/reference/sinks/prometheus">

<link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://shiftm.com/docs/reference/sinks/prometheus/">


<link rel="stylesheet" href="/styles.a54af6e8.css">


<link rel="preload" href="/styles.2ceb7c8c.js" as="script">

<link rel="preload" href="/runtime~main.65b2adc4.js" as="script">

<link rel="preload" href="/main.af87abf6.js" as="script">

<link rel="preload" href="/common.10d87740.js" as="script">

<link rel="preload" href="/2.5d8f2f96.js" as="script">

<link rel="preload" href="/4.da7ab688.js" as="script">

<link rel="preload" href="/1be78505.f2df0249.js" as="script">

<link rel="preload" href="/20ac7829.66aa896a.js" as="script">

<link rel="preload" href="/17896441.98a432a1.js" as="script">

<link rel="preload" href="/3.1d5120fd.js" as="script">

<link rel="preload" href="/8f37f11e.d8e3e8cb.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_2ZIa"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"></a><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/docs/">Docs</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container_3Vzv container container--l"><main class="main_2vyu"><div><div class="container_2j_u"><div class="leftCol_3JzO"><div class="docItemContainer_"><article><header><div class="badges"><a class="badge badge--primary" href="/components?functions[]=transmit">transmit</a></div><h1 class="docTitle_cWlf">Prometheus Sink</h1></header><div class="markdown"><p>The Vector <code>prometheus</code> sink
<a href="#exposing--scraping">exposes</a> [<code>metric</code>][docs.data-model.metric] events to
<a href="https://prometheus.io/">Prometheus</a> metrics service.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="requirements"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#requirements" title="Direct link to heading">#</a>Requirements</h2><div class="list--icons list--icons--warnings alert alert--danger" role="alert"><ul><li><a href="https://prometheus.io/">Prometheus</a> version <code>&gt;= 1.0</code> is required.</li></ul></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="configuration"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration" title="Direct link to heading">#</a>Configuration</h2><div class="margin-bottom--md"><div><ul role="tablist" aria-orientation="horizontal" class="tabs tabs--block"><li role="tab" tabindex="0" aria-selected="true" class="tab-item tab-item--active">Common</li><li role="tab" tabindex="0" aria-selected="false" class="tab-item">Advanced</li></ul></div></div><div class="mdxCodeBlock_iHAB"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2TQJ">vector.toml</div><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb copyButtonWithTitle_qt-P">Copy</button><pre class="prism-code language-toml codeBlock_1wn8 codeBlockWithTitle_1f_H"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token table class-name">sinks.my_sink_id</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key property" style="color:#36acaa">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;prometheus&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># required</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key property" style="color:#36acaa">inputs</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&quot;my-source-or-transform-id&quot;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># required</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key property" style="color:#36acaa">address</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0.0.0.0:9598&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># required</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key property" style="color:#36acaa">namespace</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;service&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># required</span></div></div></pre></div></div><div class="filters"><div class="search"><span class="search--result-count">4 items</span><input class="input--text input--lg" placeholder="üîç Search..."></div><div class="filter"><div class="filter--choices"><label title="Only show popular/common results"><input type="checkbox">common</label><label title="Only show required results"><input type="checkbox">required</label></div></div></div><ul class="connected-list"><li class="field-required" required=""><div class="badges"><span class="badge badge--secondary">string</span><span class="badge badge--primary with-info-icon" title="This is a popular that we recommend for getting started">common</span><span class="badge badge--danger">required</span></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="address"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#address" title="Direct link to heading">#</a>address</h3><p>The address to expose for scraping.
See <a href="#exposing--scraping">Exposing &amp; Scraping</a> for more info.</p><ul class="info"><li>No default</li><li><div class="show-more">View examples</div></li></ul></li><li><div class="badges"><span class="badge badge--secondary">[float] (seconds)</span><span class="badge badge--secondary">optional</span></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="buckets"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#buckets" title="Direct link to heading">#</a>buckets</h3><p>Default buckets to use for aggregating
[distribution][docs.data-model.metric#distribution] metrics into histograms.
See <a href="#histogram-buckets">Histogram Buckets</a> for more info.</p><ul class="info"><li>Default: <code>[0.005,0.01,0.025,0.05,0.1,0.25,0.5,1,2.5,5,10]</code> (seconds)</li><li><div class="show-more">View examples</div></li></ul></li><li><div class="badges"><span class="badge badge--secondary">uint (seconds)</span><span class="badge badge--secondary">optional</span></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="flush_period_secs"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#flush_period_secs" title="Direct link to heading">#</a>flush_period_secs</h3><p>Time interval between [set][docs.data-model.metric#set] values are reset.</p><ul class="info"><li>Default: <code>60</code> (seconds)</li></ul></li><li class="field-required" required=""><div class="badges"><span class="badge badge--secondary">string</span><span class="badge badge--primary with-info-icon" title="This is a popular that we recommend for getting started">common</span><span class="badge badge--danger">required</span></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="namespace"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#namespace" title="Direct link to heading">#</a>namespace</h3><p>A prefix that will be added to all metric names.
It should follow Prometheus <a href="https://prometheus.io/docs/practices/naming/#metric-names">naming conventions</a>.</p><ul class="info"><li>No default</li><li><div class="show-more">View examples</div></li></ul></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="examples"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#examples" title="Direct link to heading">#</a>Examples</h2><div class="margin-bottom--md"><div><ul role="tablist" aria-orientation="horizontal" class="tabs tabs--block"><li role="tab" tabindex="0" aria-selected="true" class="tab-item tab-item--active">Histograms</li><li role="tab" tabindex="0" aria-selected="false" class="tab-item">Counters</li><li role="tab" tabindex="0" aria-selected="false" class="tab-item">Gauges</li></ul></div></div><p>Given the following histogram metric events:</p><div class="mdxCodeBlock_iHAB"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2TQJ">Example histogram metrics</div><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb copyButtonWithTitle_qt-P">Copy</button><pre class="prism-code language-json codeBlock_1wn8 codeBlockWithTitle_1f_H"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;response_time_s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;incremental&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;distribution&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;values&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.243</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;sample_rates&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;response_time_s&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;kind&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;incremental&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;distribution&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;values&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.546</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;sample_rates&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span></div></div></pre></div></div><p>This sink will output the following:</p><div class="mdxCodeBlock_iHAB"><div style="color:#393A34;background-color:#f6f8fa" class="codeBlockTitle_2TQJ">Example sink output</div><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb copyButtonWithTitle_qt-P">Copy</button><pre class="prism-code language-text codeBlock_1wn8 codeBlockWithTitle_1f_H"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># HELP response_time_s response_time_s</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># TYPE response_time_s histogram</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.005&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.01&quot;} 1</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.025&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.05&quot;} 1</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.1&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.25&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;0.5&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;1.0&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;2.5&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;5.0&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;10.0&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_bucket{le=&quot;+Inf&quot;} 0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_sum 0.789</span></div><div class="token-line" style="color:#393A34"><span class="token plain">response_time_s_count 2</span></div></div></pre></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="how-it-works"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#how-it-works" title="Direct link to heading">#</a>How It Works</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="buffers"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#buffers" title="Direct link to heading">#</a>Buffers</h3><p>Due to the nature of Prometheus&#x27; pull model design the <code>prometheus</code>
sink does not utilize a buffer. You can read more about this in the <a href="#in-memory-aggregation">in-memory \
aggregation</a> section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="environment-variables"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#environment-variables" title="Direct link to heading">#</a>Environment Variables</h3><p>Environment variables are supported through all of Vector&#x27;s configuration.
Simply add <code>${MY_ENV_VAR}</code> in your Vector configuration file and the variable
will be replaced before being evaluated.</p><p>You can learn more in the
[Environment Variables][docs.configuration#environment-variables] section.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="exposing--scraping"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#exposing--scraping" title="Direct link to heading">#</a>Exposing &amp; Scraping</h3><p>The <code>prometheus</code> sink exposes data for scraping.
The <a href="#address"><code>address</code></a> option determines the address and port the data is made available
on. You&#x27;ll need to configure your networking so that the configured port is
accessible by the downstream service doing the scraping.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="high-cardinality-names"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#high-cardinality-names" title="Direct link to heading">#</a>High Cardinality Names</h3><p>High cardinality metric names and labels are <a href="https://prometheus.io/docs/practices/naming/#labels">discouraged by \
Prometheus</a> and you should consider alternative
strategies to reduce the cardinality as this can provide performance and
operation problems. In general, high cardinality analysis should be left logs
and storages designed for this use case (not Promtheus).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="histogram-buckets"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#histogram-buckets" title="Direct link to heading">#</a>Histogram Buckets</h3><p>Choosing the appropriate buckets for Prometheus histgorams is a complicated
point of discussion. The <a href="https://prometheus.io/docs/practices/histograms/">Histograms and Summaries Prometheus \
guide</a> provides a good overview of histograms,
buckets, summaries, and how you should think about configuring them. The buckets
you choose should align with your known range and distribution of values as
well as how you plan to report on them. The aforementioned guide provides
examples on how you should align them.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="default-buckets"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#default-buckets" title="Direct link to heading">#</a>Default buckets</h4><p>The <a href="#buckets"><code>buckets</code></a> option defines the global default buckets for histograms:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_3RXF"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1PCb">Copy</button><pre class="prism-code language-toml codeBlock_1wn8"><div class="codeBlockLines_3HrO" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0.005</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.01</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.025</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.05</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.25</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10.0</span><span class="token punctuation" style="color:#393A34">]</span></div></div></pre></div></div><p>These defaults are tailored to broadly measure the response time (in seconds)
of a network service. Most likely, however, you will be required to define
buckets customized to your use case.</p><div class="alert alert--warning alert--icon" role="alert"><i class="feather icon-alert-triangle"></i><p>Note: These values are in <code>seconds</code>, therefore,
your metric values should also be in <code>seconds</code>.
If this is not the case you should adjust your metric or buckets to coincide.</p></div><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="in-memory-aggregation"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#in-memory-aggregation" title="Direct link to heading">#</a>In-Memory Aggregation</h3><p>Like other Prometheus instances, the <code>prometheus</code> sink aggregates
metrics in memory which keeps the memory footprint to a minimum if Prometheus
fails to scrape the Vector instance over an extended period of time. The
downside is that data will be lost if Vector is restarted. This is by design of
Prometheus&#x27; pull model approach, but is worth noting if restart Vector
frequently.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="metric-definitions"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#metric-definitions" title="Direct link to heading">#</a>Metric Definitions</h3><p>By default, Vector will use the original metric names and labels set upon
creation. For most cases this makes Vector low friction, allowing you to define
the <code>prometheus</code> sink without tedious metrics definitions. You can
see examples of this in the <a href="#examples">examples section</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="metric-types"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#metric-types" title="Direct link to heading">#</a>Metric Types</h3><p>As described in the [metric data model][docs.data-model.metric] page, Vector offers
a variety of metric types. Their support, as as well as their mappings, are
described below:</p><table><thead><tr><th align="left">Vector Metric Type</th><th align="left">Prometheus Metric Type</th></tr></thead><tbody><tr><td align="left">[<code>counter</code>][docs.data-model.metric#counter]</td><td align="left"><a href="https://prometheus.io/docs/concepts/metric_types/#counter">&#x27;counter&#x27;</a></td></tr><tr><td align="left">[<code>gauge</code>][docs.data-model.metric#gauge]</td><td align="left"><a href="https://prometheus.io/docs/concepts/metric_types/#gauge">&#x27;gauge&#x27;</a></td></tr><tr><td align="left">[<code>histogram</code>][docs.data-model.metric#aggregated_histogram]</td><td align="left"><a href="https://prometheus.io/docs/concepts/metric_types/#histogram">&#x27;histogram&#x27;</a></td></tr><tr><td align="left">[<code>set</code>][docs.data-model.metric#set]</td><td align="left">‚ö†Ô∏è not supported</td></tr><tr><td align="left">-</td><td align="left"><a href="https://prometheus.io/docs/concepts/metric_types/#summary">&#x27;summary&#x27;</a></td></tr></tbody></table><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="sets"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#sets" title="Direct link to heading">#</a>Sets</h4><p>Prometheus does not have a [<code>set</code>][docs.data-model.metric#set] type. Sets are
generally specific to <a href="https://github.com/statsd/statsd/blob/master/docs/metric_types.md#sets">Statsd</a>, and if a set is received in the
<code>prometheus</code> sink it will be dropped, and a rate limited warning
level log will be output.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="summaries"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#summaries" title="Direct link to heading">#</a>Summaries</h4><p>Summaries are a Prometheus specific type and Vector does not default to them
by default. <a href="https://github.com/timberio/vector/issues/710">issue #710</a> addresses the ability to define metrics,
including the ability change their types (such as changing them to <code>summary</code>
types).</p><h4><a aria-hidden="true" tabindex="-1" class="anchor" id="oom-errors"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#oom-errors" title="Direct link to heading">#</a>OOM Errors</h4><p>If you experience out of memory (OOM) errors it&#x27;s likely you&#x27;re using extremely
<a href="#high-cardinality">high cardinality</a> metric names or labels. This is
<a href="https://prometheus.io/docs/practices/naming/#labels">discouraged by Prometheus</a> and you should
consider alternative strategies to reduce the cardinality. Such as leveraging
logs for high cardinality analysis. <a href="https://github.com/timberio/vector/issues/387">Issue #387</a> discusses the
ability to provide safeguards around this. We encourage you to add to that
discussion with your use case if you find this to be a problem.</p></div></article></div></div><div class="rightCol_38kP"><div class="table-of-contents tableOfContents_tVyB"><div class="section"><div class="title">Support</div><div><a class="text--warning" title="This component is in beta and is not recommended for production environments. Click to learn more." href="/docs/about/guarantees/#beta"><i class="feather icon-alert-triangle"></i> Beta Status</a></div><div><a class="text--warning" title="This component makes a best-effort delivery guarantee, and in rare cases can lose data. Click to learn more." href="/docs/about/guarantees/#best-effort"><i class="feather icon-shield-off"></i> Best-Effort Delivery</a></div><div><a title="This component works on the Linux, MacOS, Windows operating systems." href="/docs/setup/installation/operating-systems/"><i class="feather icon-cpu"></i> <span class="text--primary">Linux</span><span>, </span><span class="text--primary">MacOS</span><span>, </span><span class="text--primary">Windows</span></a></div></div><div class="section"><div class="title">Contents</div><ul class="contents"><li><a href="#requirements" class="contents__link">Requirements</a></li><li><a href="#configuration" class="contents__link">Configuration</a><ul><li><a href="#address" class="contents__link">address</a></li><li><a href="#buckets" class="contents__link">buckets</a></li><li><a href="#flush_period_secs" class="contents__link">flush_period_secs</a></li><li><a href="#namespace" class="contents__link">namespace</a></li></ul></li><li><a href="#examples" class="contents__link">Examples</a></li><li><a href="#how-it-works" class="contents__link">How It Works</a><ul><li><a href="#buffers" class="contents__link">Buffers</a></li><li><a href="#environment-variables" class="contents__link">Environment Variables</a></li><li><a href="#exposing--scraping" class="contents__link">Exposing &amp; Scraping</a></li><li><a href="#high-cardinality-names" class="contents__link">High Cardinality Names</a></li><li><a href="#histogram-buckets" class="contents__link">Histogram Buckets</a></li><li><a href="#in-memory-aggregation" class="contents__link">In-Memory Aggregation</a></li><li><a href="#metric-definitions" class="contents__link">Metric Definitions</a></li><li><a href="#metric-types" class="contents__link">Metric Types</a></li></ul></li></ul></div><div class="section"><div class="title">Resources</div><ul class="contents"><li><a href="https://github.com/timberio/vector/issues?q=is%3Aopen+is%3Aissue+label%3A%22sink%3A+prometheus%22" class="contents__link" target="_blank"><i class="feather icon-message-circle"></i> View Issues</a></li><li><a href="https://github.com/timberio/vector/tree/master/src/sinks/prometheus.rs" class="contents__link" target="_blank"><i class="feather icon-github"></i> View Source</a></li></ul></div></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col col--5 footer__col"><div class="margin-bottom--md"></div><div class="margin-bottom--md"><div class="mailing-list"><form action="https://shiftm.us18.list-manage.com/subscribe/post" method="post" class="mailing-list--form"><input type="hidden" name="u" value="ef3f45d9742db70a70fd6e4c4"><input type="hidden" name="id" value="82fab539e5"><input type="email" class="input input--undefined" name="EMAIL" placeholder="your@email.com" style="width:150px"><button class="button button--primary button--undefined" type="submit">Subscribe</button></form></div></div></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about/what-is-shiftm/">What is Shift&#x27;M</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/about/terms_and_cond/">Terms and Conditions</a></li><li class="footer__item"><a class="footer__link-item" to="https://shiftm.com/contact" href="https://shiftm.com/contact">Contact Us</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Mobile</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://www.apple.com/ios/app-store">App Store</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://play.google.com/store?hl=en">Play Store</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://facebook.com/shiftmhealthcare">Facebook</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://instagram.com/shiftm_">Instagram</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://twitter.com/ShiftM_">Twitter</a></li><li class="footer__item"><a class="footer__link-item" target="_blank" rel="noopener noreferrer" href="https://linkedIn.com/company/Shift-m">LinkedIn</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://shiftm.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_3L_r"></a></div>Copyright ¬© 2020 Shift&#x27;M B.V<br></div></div></footer>
</div>

<script src="/styles.2ceb7c8c.js"></script>

<script src="/runtime~main.65b2adc4.js"></script>

<script src="/main.af87abf6.js"></script>

<script src="/common.10d87740.js"></script>

<script src="/2.5d8f2f96.js"></script>

<script src="/4.da7ab688.js"></script>

<script src="/1be78505.f2df0249.js"></script>

<script src="/20ac7829.66aa896a.js"></script>

<script src="/17896441.98a432a1.js"></script>

<script src="/3.1d5120fd.js"></script>

<script src="/8f37f11e.d8e3e8cb.js"></script>


</body>
</html>